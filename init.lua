--
--⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⣠⣤⣀⠀⠀⠀⠀⠀⠀⠀⠀⠀⢀⡾⡛⢶⣤⡀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀
--⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⣴⡣⣒⡫⣳⢦⣄⠀⠀⠀⠀⠀⠀⣾⠊⢭⡢⡑⢝⢷⡄⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀
--⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⢀⡿⠫⠛⠿⣾⠕⡜⣆⠀⠀⣀⡤⣺⡧⡤⡠⠕⠰⢠⠆⣿⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀
--⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠸⣥⡞⡑⠲⢼⡟⣰⢻⣤⡾⣋⣼⣿⡧⢇⣣⠧⡇⠀⢸⡏⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀
--⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⢹⡴⠴⠊⣞⢿⣹⣿⡿⢋⣾⣿⣿⣷⣠⣄⣾⠟⣴⣿⠙⢷⣶⢤⡤⢤⣀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀
--⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⢿⡩⠭⠎⡼⢫⠋⢠⣿⣿⣿⣿⣿⣷⡤⠤⠾⢟⡫⠇⡆⠈⠂⠁⠀⠘⣦⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀
--⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠈⠙⣖⡋⠀⠁⢠⣿⣿⣿⣿⣿⣏⠊⠻⡓⠢⠔⠀⠀⠄⠀⠀⠀⣶⣦⠌⠳⣄⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀
--⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⣴⠋⠀⠈⠀⠘⠻⣿⠿⡻⣿⣿⣅⠀⠈⠂⠀⠀⠀⠀⠀⠀⠀⠸⡇⡕⠅⠈⢙⣦⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀
--⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⢸⢁⣶⠀⠀⠀⣢⠾⢿⣆⠙⡜⢿⡿⣦⡀⠀⠀⠀⠀⠀⠀⠀⠀⠀⢹⡄⡠⠊⢖⢝⣧⡀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀
--⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⣾⠜⠀⠀⠀⠀⠀⠀⠈⠃⡜⠁⠈⠐⢌⠛⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⢻⡀⠀⢀⣩⢼⣷⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀
--⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⣰⠇⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⢷⢠⠃⢐⣧⢿⡀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀
--⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⢀⡾⠁⠀⠀⠀⠀⠀⡀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⢸⡇⠀⡪⣶⡎⣇⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀
--⠀⠀⠀⠀⠀⠀⠀⠀⠀⢀⡶⠋⠀⠀⠀⠀⢀⠔⠈⠀⠀⠀⠀⠀⠀⠀⢀⣠⣴⣆⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⢸⡇⡜⢁⠽⡹⣇⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀
--⠀⠀⠀⠀⠀⠀⠀⠀⠀⠈⠣⣄⣀⣴⠶⠶⠿⠶⠶⠶⠶⠤⠤⠖⠒⠚⠋⠉⠙⠉⠈⠁⠀⠀⠀⠀⠀⠀⠀⠀⠀⢸⡏⠀⠤⢶⣿⣹⡆⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀
--⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⢿⡐⠒⠒⠀⠀⠀⠀⠀⠀⢀⣐⣂⣀⠀⠀⢀⡀⠔⢀⡠⠔⠁⠀⠀⠀⠀⠀⣼⡀⡞⠀⡴⠓⢻⡇⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀
--⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠈⣿⠲⣶⣤⣤⣤⡤⣶⢿⠿⠿⠿⠿⠿⠟⠓⠂⠉⠁⠀⠀⠀⠀⠀⠀⠀⢀⡿⠊⠠⡱⠡⣺⡎⡇⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀
--⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⢰⡇⡠⢹⣾⡗⣬⡇⠾⡆⠑⠢⠤⠤⠤⠄⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⣼⠿⠕⠊⠀⡈⠔⠒⠻⣄⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀
--⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⢀⡿⠒⢖⣿⣿⠑⣼⡱⠘⣱⠀⠀⠠⣀⠀⠀⠀⡔⡰⠀⠀⠀⠀⠀⠀⠀⢠⡷⡲⠒⠒⠉⡠⠪⢭⣕⢻⡀⠀⠀⠀⠀⠀⠀⠀⠀⠀
--⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⣼⠃⢭⣿⣿⡇⣠⣿⡃⢠⡟⣇⠀⠐⠠⣉⠒⡊⢔⠔⠀⠀⠀⠀⠀⠀⠀⣼⠋⡀⠄⣢⣅⠀⠐⢵⣆⢀⣇⠀⠀⠀⠀⠀⠀⠀⠀⠀
--⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⢰⠇⣐⣾⣿⣿⢹⣿⠧⠀⣼⠀⠸⡆⠀⠀⠀⠉⠉⠕⠁⠀⠀⠀⠀⠀⠀⢰⡏⢡⠀⠨⡤⠒⡂⠀⠀⠀⠇⢹⠀⠀⠀⠀⠀⠀⠀⠀⠀
--⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⢀⡟⠩⣽⣿⣿⠇⣾⡟⠀⢠⡧⠄⢠⡟⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⢀⣾⣏⠁⠀⠀⠀⠀⠸⡔⠒⠀⢴⢼⡇⠀⠀⠀⠀⠀⠀⠀⠀
--⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⡼⠁⢸⣿⣿⠏⣴⣿⠤⠤⣾⣉⡴⠚⠁⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⢀⣿⣿⡗⡁⠀⢀⠀⠀⠐⠣⠄⠀⡨⠇⣷⠀⠀⠀⠀⠀⠀⠀⠀
--⠀⠀⠀⠀⠀⠀⠀⠀⠀⢰⠇⢉⣿⣿⡯⣤⣿⣯⣶⣪⠟⠉⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠸⢹⢻⣿⡄⠈⠀⡀⠀⠀⠬⢀⣐⣊⠥⠽⣧⠀⠀⠀⠀⠀⠀⠀
--⠀⠀⠀⠀⠀⠀⠀⠀⢠⡟⠘⣿⣿⡿⢛⣿⣿⣿⣧⠁⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⡇⠀⠜⣿⣏⢶⡊⠀⢀⡀⠀⣀⠀⠲⠀⠃⠈⠳⡄⠀⠀⠀⠀⠀
--⠀⠀⠀⠀⠀⠀⢀⡴⠏⠀⣰⣿⣿⢔⣽⣿⣿⣿⣿⣧⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⡿⠿⣼⣿⣴⣁⠄⠒⠒⠡⠐⢙⠒⠕⠁⠱⡄⠀⠀⠀⠀
--⠀⠀⠀⠀⠀⣰⠯⣶⣡⣪⣿⣻⣿⣿⣿⣿⣿⣿⣿⣿⡄⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠸⠁⣰⣿⣿⣿⣿⣦⣄⡀⠀⢀⡨⢆⠑⠐⢏⣻⡄⠀⠀⠀
--⠀⠀⠀⠀⣼⣡⣿⢟⣝⣽⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⡤⣀⣀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⡰⣵⣿⣿⣿⣿⣿⣏⠁⠀⠐⠒⢈⣄⠱⡀⢻⡇⠀⠀⠀
--⠀⠀⠀⠀⠿⢿⢇⣼⠟⠉⠀⠈⢿⣿⣿⣿⣿⣿⣿⣿⣿⣷⣝⢿⣿⣇⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⢀⣤⣾⢳⣿⣿⣿⣿⣿⣿⣿⡳⢦⣀⠀⠃⠊⠒⠣⡒⢳⡄⠀⠀
--⠀⠀⠀⠀⢀⡾⠋⠀⠀⠀⠀⠀⠈⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣷⣝⡿⣦⡀⠀⠀⠀⠀⠀⠀⠀⢀⣾⣿⡏⣾⣿⣿⣿⣿⣿⣿⣿⡇⠀⠉⠳⢤⡀⠀⠉⠙⡀⢳⡀⠀
--⠀⠀⢀⠔⠋⠀⠀⠀⠀⠀⠀⠀⠀⢸⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣾⣷⣄⡀⠀⠀⠀⠀⠀⣼⣿⣿⣧⣿⣿⣿⣿⣿⣿⣿⣿⡇⠀⠀⠀⠀⠙⠲⣄⠀⠑⡄⢷⡀
--⢀⡴⠁⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⢘⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⡿⠀⠀⠀⠀⢠⣿⣿⣿⢹⣿⣿⣿⣿⣿⣿⣿⣿⣧⠀⠀⠀⠀⠀⠀⠘⢧⡀⢱⡈⢧
--⡾⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⠀⢸⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣿⣧⠀⠀⠀⠀⢸⣿⣿⣿⡟⣿⣿⣿⣿⣿⣿⣿⣿⣿⠀⠀⠀⠀⠀⠀⠀⠀⢷⠈⢿⢸

require 'vhg.settings'
require 'vhg.keymaps'

-- Minimal number of screen lines to keep above and below the cursor.
vim.api.nvim_create_autocmd({ 'VimResized', 'VimEnter' }, {
  desc = 'Calculate the number of lines based on the height of the window',
  callback = function()
    -- if larger than 80 lines, set to 35, otherwise set to height / 2 - 15
    local visible_lines = vim.o.lines > 80 and 35 or math.floor((vim.o.lines - 15) / 2)
    vim.opt.scrolloff = visible_lines
  end,
})

--- Function to adjust scrolloff to leave blank space at the bottom
local AdjustScrolloff = function()
  local current_line = vim.fn.line '.'
  local top_line = vim.fn.line 'w0'
  local lines_from_top = current_line - top_line

  local win_height = vim.fn.winheight(0)
  local scrolloff = vim.o.scrolloff
  local max_lines_from_top = win_height - scrolloff

  if lines_from_top > max_lines_from_top then
    vim.fn.winrestview { topline = current_line - max_lines_from_top }
  end
end

-- Set up autocmd to call AdjustScrolloff whenever the CursorMoved event is triggered
vim.api.nvim_create_autocmd('CursorMoved', {
  desc = 'Adjust scrolloff to leave blank space at the bottom',
  callback = AdjustScrolloff,
})

-- Highlight when yanking (copying) text
vim.api.nvim_create_autocmd('TextYankPost', {
  desc = 'Highlight when yanking (copying) text',
  group = vim.api.nvim_create_augroup('kickstart-highlight-yank', { clear = true }),
  callback = function()
    vim.highlight.on_yank()
  end,
})

local lazypath = vim.fn.stdpath 'data' .. '/lazy/lazy.nvim'
if not vim.loop.fs_stat(lazypath) then
  local lazyrepo = 'https://github.com/folke/lazy.nvim.git'
  vim.fn.system { 'git', 'clone', '--filter=blob:none', '--branch=stable', lazyrepo, lazypath }
end
vim.opt.rtp:prepend(lazypath)

require('lazy').setup {
  spec = 'vhg.plugins',
}

require('remote-nvim').setup()
-- set background color
vim.api.nvim_set_hl(0, 'Normal', { bg = '#1C1C23' })
